{% extends "base.html" %}

{% load i18n future mezzanine_tags static thumbnail %}
{% load follow_tags %}
{% load hitcount_tags %}
{% load userProfile_tags %}
{% block meta_title %}{% trans "Search Results" %}{% endblock %}
{% block title %}{% trans "Search Results" %}{% endblock %}

{% block extra_css %}

{% compress css %}
<link rel="stylesheet" type="text/css" href="{% static "css/vallenato.css" %}"/>
<link rel="stylesheet" type="text/css" href="{% static "css/searchresults.css" %}"/>
{% endcompress %}

{% endblock %}

{% block extra_js %}

{% compress js %}
<script src="{% static "js/vallenato.js" %}"></script>
<script type="text/javascript" src="{% static "js/search-result.js" %}"></script>
{% endcompress %}

{% endblock %}

{% block main %}

<div class="row topHalfGutter color5D fontTitillium1 fontSize13">
	<div class="span7">
<!-- 		<div class="row">
			<div class="span7">
				{% if results.paginator.count == 0 %}
					{% blocktrans %}
					No results were found in {{ search_type }} matching your query: {{ query }}
					{% endblocktrans %}
				{% else %}
					{% blocktrans with start=results.start_index end=results.end_index total=results.paginator.count %}
					Showing {{ start }} to {{ end }} of {{ total }} results in {{ search_type }} matching your query: 
					<span class="fontSize15 fontHelvetica">
						{{parent_category}} |
					</span>
					<span class="fontTitillium1">
						{{sub_category}}
					</span>
					{% endblocktrans %}
				{% endif %}
			</div>
		</div> -->
		<div class="row greyBar height26 colorWhite fontTitillium2 fontSize13">
			<div class="span7 halfGutter">
				<span class="fontSize16 fontHelvetica">
					{{parent_category_title}} |
				</span>
				<span class="fontSize14">
					{{sub_category_title}}
				</span>
			</div>
		</div>
		<div class="row yellowBar height26auto color5D fontTitillium2 fontSize13 topHalfGutter">
			<div class="span7 halfGutter searchFilter"><span class="fontTitillium1">{% trans "Filter By"%}</span>					
				<label for="price"><input type="checkbox" value="price" name="price"></input>{% trans "Price" %}</label>
				<label for="variety"><input type="checkbox" value="variety" name="variety"></input>{% trans "Variety" %}</label>
				<label for="quality"><input type="checkbox" value="quality" name="quality"></input>{% trans "Quality" %}</label>
				<label for="service"><input type="checkbox" value="service" name="service"></input>{% trans "Customer Service" %}</label>
				<label for="exchange"><input type="checkbox" value="exchange" name="exchange"></input>{% trans "Exchange Experience" %}</label>
				<label for="overall"><input type="checkbox" value="overall" name="overall"></input>{% trans "Overall" %}</label>
				<button id="searchResultFilter" class="fontTitillium1 fontSize13">{% trans "Go" %}</button>
			</div>
		</div>
		<div class="row">
			<div class="whiteBox topHalfGutter">
				<div id="search-results"  class="span7">
				    {% for result in results.object_list %}
				    <div class="vendorResult topHalfGutter row">
				    	<div class="span1_5 vendorImageLarge pagination-centered halfGutter">
				    		<a href="{{ result.get_absolute_url }}">
							<img src="
									{% if settings.BLOG_USE_FEATURED_IMAGE %}
										{% if result.featured_image %}											                                                                 {% thumbnail result.featured_image "100x100" as img %}
                                                                                                {{ img.url }}
                                                                                        {% endthumbnail %}
										{% else %}
											{% static "img/store_default.png" %}
										{% endif %}
									{% endif %}"
									class="noBoxShadow"
									>
							</a>
						</div>
						<div class="span6 fontTitillium2 fontSize13 halfGutter">
							<div class="row">
								<div class="span6">
							        <a class="vendorName fontTitillium" href="{{ result.get_absolute_url }}">{{ result|title }}</a>
							        <span class="searchResultRating searchResultRatingText searchResultRatingScheme rating-{{result.overall_average|floatformat:"0"}} pull-right halfGutterRight">{{result.overall_average|floatformat:"1"}}</span>
							        <p class="webUrl fontTitillium1"><a href="{{result.web_url}}" class="radioColor">{{result.web_url}}</a></p>
						    	</div>
						    </div>
						    <div class="row">
								<div class="span5">
								    <p class="resultDesc">{{ result.description|truncatewords_html:40|safe }}</p>
								    <a class="radioColor" href="{{ result.get_absolute_url }}">{% trans "More..." %}</a>
							    	<div class="row topHalfGutter bottomHalfGutter">
										{% include 'blog/store_radio_module.html' with blog_post=result noShare="True" wholeReviewLink="True" %}
									</div>
								</div>
						    </div>
						</div>
						<div class="dottedSeparator span7"></div>
					 </div>
				    {% endfor %}
				</div>
			</div>
		</div>
	</div>
	<div class="span3 whiteBox">
    	<div id="accordion-container">
            <h2 class="accordion-header"><span class="hotDealsIcon">%&nbsp;</span>{% trans "TOP DEALS" %}
                <div class="yellowLineContainer">
                    <hr class="whiteLine"/>
                </div>
            </h2>
            <div class="accordion-content"> 
                <div id="topDealsForStore">
             		{% render_deals_for_categories parent_category sub_category 'DEALS_NUM_LATEST'|settings_value 'vertical'%}
                </div>
            </div> 
    	</div>
	</div>
</div>

{% pagination_for results %}

{% endblock %}

{% extends "base.html" %}

{% load i18n future mezzanine_tags static %}
{% load follow_tags %}
{% load hitcount_tags %}
{% load userProfile_tags %}
{% block meta_title %}{% trans "Search Results" %}{% endblock %}
{% block title %}{% trans "Search Results" %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static "css/vallenato.css" %}"/>
<link rel="stylesheet" type="text/css" href="{% static "css/searchresults.css" %}"/>
{% endblock %}

{% block extra_js %}
<script src="{% static "js/vallenato.js" %}"></script>
<script type="text/javascript" src="{% static "js/search-result.js" %}"></script>
{% endblock %}

{% block main %}

<div class="row topHalfGutter color5D fontTitillium1 fontSize13">
	<div class="span7">
<!-- 		<div class="row">
			<div class="span7">
				{% if results.paginator.count == 0 %}
					{% blocktrans %}
					No results were found in {{ search_type }} matching your query: {{ query }}
					{% endblocktrans %}
				{% else %}
					{% blocktrans with start=results.start_index end=results.end_index total=results.paginator.count %}
					Showing {{ start }} to {{ end }} of {{ total }} results in {{ search_type }} matching your query: 
					<span class="fontSize15 fontHelvetica">
						{{parent_category}} |
					</span>
					<span class="fontTitillium1">
						{{sub_category}}
					</span>
					{% endblocktrans %}
				{% endif %}
			</div>
		</div> -->
		<div class="row greyBar height26 colorWhite fontTitillium2 fontSize13">
			<div class="span7">
				<span>
					{% trans "You searched for"%}
				</span>
				<span class="fontSize16 fontHelvetica">
					{{parent_category}} |
				</span>
				<span class="fontSize14">
					{{sub_category}}
				</span>
			</div>
		</div>
		<div class="row yellowBar height26auto color5D fontTitillium2 fontSize13 topHalfGutter">
			<div class="span7 searchFilter"><span class="fontTitillium1">{% trans "Filter By"%}</span>					
				<label for="price"><input type="checkbox" value="price" name="price"></input>{% trans "Price" %}</label>
				<label for="variety"><input type="checkbox" value="variety" name="variety"></input>{% trans "Variety" %}</label>
				<label for="quality"><input type="checkbox" value="quality" name="quality"></input>{% trans "Quality" %}</label>
				<label for="service"><input type="checkbox" value="service" name="service"></input>{% trans "Customer Service" %}</label>
				<label for="exchange"><input type="checkbox" value="exchange" name="exchange"></input>{% trans "Exchange Experience" %}</label>
				<label for="overall"><input type="checkbox" value="overall" name="overall"></input>{% trans "Overall" %}</label>
				<button id="searchResultFilter" class="fontTitillium1 fontSize13">{% trans "Go" %}</button>
			</div>
		</div>
		<div class="row">
			<div id="search-results"  class="whiteBox span7 topHalfGutter">
			    {% for result in results.object_list %}
			    <div class="vendorResult row">
			    	<div class="span2 whiteBox pagination-centered noGutter">
			    		<a href="{{ result.get_absolute_url }}">
						<img src="
								{% if settings.BLOG_USE_FEATURED_IMAGE %}
									{% if result.featured_image %}
										{{ MEDIA_URL }}{% thumbnail result.featured_image 100 0 %}
									{% else %}
										{% static "img/store_default.png" %}
									{% endif %}
								{% endif %}"
								class="noBoxShadow"
								>
						</a>
					</div>
					<div class="span5 fontTitillium2 fontSize13">
					    <div>
					        <a class="vendorName fontTitillium" href="{{ result.get_absolute_url }}">{{ result }}</a>
					        <span class="searchResultRating searchResultRatingText searchResultRatingScheme rating-{{result.overall_average|floatformat:"0"}} pull-right">{{result.overall_average|floatformat:"1"}}</span>
					        <p class="webUrl fontTitillium1"><a href="{{result.web_url}}" class="radioColor">{{result.web_url}}</a></p>
					    </div>
					    <p class="resultDesc">{{ result.description|truncatewords_html:40|safe }}</p>
					    <a href="{{ result.get_absolute_url }}">{% trans "read more" %}</a>
				    	<div class="row topHalfGutter bottomHalfGutter">
							{% include 'blog/store_radio_module.html' with blog_post=result noShare="True" wholeReviewLink="True" %}
						</div>
					</div>
					<hr class="dottedSeparator span7">
				 </div>
			    {% endfor %}
			</div>
		</div>
	</div>
	<div class="span3 whiteBox" style="overflow:auto">
    	<div id="accordion-container">
            <h2 class="accordion-header"><span class="hotDealsIcon">%&nbsp;</span>{% trans "TOP DEALS" %}
                <div class="yellowLineContainer">
                    <hr class="whiteLine"/>
                </div>
            </h2>
            <div class="accordion-content"> 
                <div id="topDealsForStore">
             		{% render_deals_for_categories parent_category sub_category 'DEALS_NUM_LATEST'|settings_value 'vertical'%}
                </div>
            </div> 
    	</div>
	</div>
</div>

{% pagination_for results %}

{% endblock %}

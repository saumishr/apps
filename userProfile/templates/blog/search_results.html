{% extends "base.html" %}

{% load i18n future mezzanine_tags static %}
{% load follow_tags %}
{% load hitcount_tags %}
{% load userProfile_tags %}
{% block meta_title %}{% trans "Search Results" %}{% endblock %}
{% block title %}{% trans "Search Results" %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static "css/vallenato.css" %}"/>
<link rel="stylesheet" type="text/css" href="{% static "css/searchresults.css" %}"/>
{% endblock %}

{% block extra_js %}
<script src="{% static "js/vallenato.js" %}"></script>
<script type="text/javascript" src="{% static "js/search-result.js" %}"></script>
{% endblock %}

{% block main %}

<div class="row topHalfGutter color5D fontTitillium1 fontSize13">
	<div class="span7">
		<div class="row">
			<div class="span7">
				{% if results.paginator.count == 0 %}
					{% blocktrans %}
					No results were found in {{ search_type }} matching your query: {{ query }}
					{% endblocktrans %}
				{% else %}
					{% blocktrans with start=results.start_index end=results.end_index total=results.paginator.count %}
					Showing {{ start }} to {{ end }} of {{ total }} results in {{ search_type }} matching your query: 
					<span class="fontSize15 fontHelvetica">
						{{parent_category}} |
					</span>
					<span class="fontTitillium1">
						{{sub_category}}
					</span>
					{% endblocktrans %}
				{% endif %}
			</div>
		</div>
		<div class="row yellowBar height40">
			<div class="span7">
				<span>
					{% trans "You searched for"%}
				</span>
				<span class="fontSize20 fontHelvetica">
					{{parent_category}} |
				</span>
				<span class="fontSize16 fontTitillium1">
					{{sub_category}}
				</span>
				<span class="pull-right"> Filter By:
					<select id="filtersSelect" class="dealsFilter" style="width:200px;" multiple>
					    <option value="empty" selected="" disabled="">Filter By</option>
					    <option value="price">Price</option>
					    <option value="variety">Variety</option>
					    <option value="quality">Quality</option>
					    <option value="service">Customer Service</option>
					    <option value="exchange">Exchange Experience</option>
					    <option value="overall">Overall</option>
					</select>
					<input type="button" id="searchResultFilter" value="Go">
				<span>
			</div>
		</div>
		<div class="row">
			<div class="whiteBox">
				<div class="span7 topHalfGutter">
					<div id="search-results">
					    {% for result in results.object_list %}
					    <div class="vendorResult row">
					    	<div class="span2 whiteBox pagination-centered noGutter">
					    		<a href="{{ result.get_absolute_url }}">
								<img src="
										{% if settings.BLOG_USE_FEATURED_IMAGE %}
											{% if result.featured_image %}
												{{ MEDIA_URL }}{% thumbnail result.featured_image 100 0 %}
											{% else %}
												{% static "img/store_default.png" %}
											{% endif %}
										{% endif %}"
										class="noBoxShadow"
										>
								</a>
							</div>
							<div class="span5 fontTitillium2 fontSize13">
							    <div>
							        <a class="vendorName fontTitillium" href="{{ result.get_absolute_url }}">{{ result }}</a>
							        <span class="searchResultRating searchResultRatingText searchResultRatingScheme rating-{{result.overall_average|floatformat:"0"}} pull-right">{{result.overall_average|floatformat:"1"}}</span>
							        <p class="webUrl fontTitillium1"><a href="{{result.web_url}}" class="radioColor">{{result.web_url}}</a></p>
							    </div>
							    <p class="resultDesc">{{ result.description|truncatewords_html:40|safe }}</p>
							    <a href="{{ result.get_absolute_url }}">{% trans "read more" %}</a>
						    	<div class="row topHalfGutter bottomHalfGutter">
									{% include 'blog/store_radio_module.html' with blog_post=result noShare="True" %}
								</div>
							</div>
							<hr class="dottedSeparator span10">
						 </div>
					    {% endfor %}
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="span3 whiteBox" style="overflow:auto">
    	<div id="accordion-container">
            <h2 class="accordion-header"><span class="hotDealsIcon">%&nbsp;</span>{% trans "TOP DEALS" %}
                <div class="yellowLineContainer">
                    <hr class="whiteLine"/>
                </div>
            </h2>
            <div class="accordion-content"> 
                <div id="topDealsForStore">
             		{% render_deals_for_categories parent_category sub_category 'DEALS_NUM_LATEST'|settings_value 'vertical'%}
                </div>
            </div> 
    	</div>
	</div>
</div>

{% pagination_for results %}

{% endblock %}
